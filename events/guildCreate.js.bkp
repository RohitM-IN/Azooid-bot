const Discord = require("discord.js");
const fs = require("fs");
const config1 = require("../config.json");
const admin = require('firebase-admin');
const serviceAccount = require('../serviceAccount.json')
let db = admin.firestore();
var ref = admin.database().ref();


module.exports =  async (gData) => {
       db.collection('guilds').doc(gData.id).set({
        'guildID': gData.id,
        'guildName': gData.name,
        'guildOwner': gData.owner.user.username,
        'guildOwnerID': gData.owner.id,
        'guildMemberCount': gData.memberCount,
        'prefix': '.',
        'welcomeChannelID': "default",
        'logchannel':'default',
        'voicelogchannel':'default',
        'guildautorole':'default',
        'defaultchannelID':"default"
    })
    

//     let msgs = JSON.parse(fs.readFileSync("./prefixsettings.json", "utf8"));

    // msgs [client.guild.id]= {
    //     prefixes: config1.prefix
    // };
    // await fs.writeFile("./prefixsettings.json", JSON.stringify(msgs), (err) => {
    //     if (err) throw err;
    //     console.log(`done`);
 
    // });

    // Your other stuff like adding to guildArray
    console.log(`Hi, ${client.user.username} is now serving in ${client.guilds.size} servers and serving ${client.guilds.reduce((c, p) => c + p.memberCount, 0)} users!.`);
        

}

